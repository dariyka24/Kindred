import{n as l,g as n,z as g,d as f,e as o,f as u,v as p,A as h,o as b}from"./firebace-Cb3kG9CG.js";const O=l();async function E(){const r=n("#email"),t=n("#password"),s=n("#name"),e=n("#surname");if(!r||!t||!s||!e)return;const a=r.value,d=t.value,c=s.value,m=e.value;try{const i=await g(O,a,d);await f(o(u,"users"),{uid:i.user.uid,role:"customer",name:c,email:a,surname:m,dateOfRegister:new Date().toLocaleDateString("ru-RU"),about:"",city:"",dateOfBirth:"",img:"https://firebasestorage.googleapis.com/v0/b/kindred-4b120.firebasestorage.app/o/users%2Funnamed.jpg?alt=media&token=3a5e0dbc-a6db-46dd-bced-cb0819533b37",phone:"",score:p(3)}),document.cookie=`UID = ${i.user.uid}; max-age=259200; path=/`,document.cookie="Role = customer; max-age=259200; path=/",await w(i.user.uid),window.location.href="/Kindred/cabinet-user.html"}catch(i){y(i)}}function y(r){const t=n(".form__error");if(t)switch(r.code){case h.EMAIL_EXISTS:t.innerText="Користувач з даною поштою вже зареєстрований",t.style.opacity="1";break;default:t.innerText="Помилка при створенні аккаунту. Повторіть спробу пізніше",t.style.opacity="1";break}}async function w(r){const t=await b(o(u,"users")),s=[];t.forEach(a=>{s.push({id:a.id,uid:a.data().uid,name:a.data().name||"",email:a.data().email||"",surname:a.data().surname||"",dateOfRegister:a.data().dateOfRegister||"",about:a.data().about||"",city:a.data().city||"",dateOfBirth:a.data().dateOfBirth||"",img:a.data().img||"",phone:a.data().phone||""})});const e=s.find(a=>a.uid===r);e&&localStorage.setItem("user",JSON.stringify({id:e.id,name:e.name,email:e.email,surname:e.surname,dateOfRegister:e.dateOfRegister,about:e.about,city:e.city,dateOfBirth:e.dateOfBirth,img:e.img,phone:e.phone}))}export{w as a,E as r};
