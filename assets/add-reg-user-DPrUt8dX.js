import{n as l,g as n,z as g,d as f,e as o,f as u,A as p,o as h}from"./firebace-Cb3kG9CG.js";const b=l();async function R(){const r=n("#email"),t=n("#password"),s=n("#name"),a=n("#surname");if(!r||!t||!s||!a)return;const e=r.value,d=t.value,c=s.value,m=a.value;try{const i=await g(b,e,d);await f(o(u,"users"),{uid:i.user.uid,role:"customer",name:c,email:e,surname:m,dateOfRegister:new Date().toLocaleDateString("ru-RU"),about:"",city:"",dateOfBirth:"",img:"https://firebasestorage.googleapis.com/v0/b/kindred-4b120.firebasestorage.app/o/users%2Funnamed.jpg?alt=media&token=3a5e0dbc-a6db-46dd-bced-cb0819533b37",phone:"",score:3}),document.cookie=`UID = ${i.user.uid}; max-age=259200; path=/`,document.cookie="Role = customer; max-age=259200; path=/",await w(i.user.uid),window.location.href="/Kindred/cabinet-user.html"}catch(i){O(i)}}function O(r){const t=n(".form__error");if(t)switch(r.code){case p.EMAIL_EXISTS:t.innerText="Користувач з даною поштою вже зареєстрований",t.style.opacity="1";break;default:t.innerText="Помилка при створенні аккаунту. Повторіть спробу пізніше",t.style.opacity="1";break}}async function w(r){const t=await h(o(u,"users")),s=[];t.forEach(e=>{s.push({id:e.id,uid:e.data().uid,name:e.data().name||"",email:e.data().email||"",surname:e.data().surname||"",dateOfRegister:e.data().dateOfRegister||"",about:e.data().about||"",city:e.data().city||"",dateOfBirth:e.data().dateOfBirth||"",img:e.data().img||"",phone:e.data().phone||""})});const a=s.find(e=>e.uid===r);a&&localStorage.setItem("user",JSON.stringify({id:a.id,name:a.name,email:a.email,surname:a.surname,dateOfRegister:a.dateOfRegister,about:a.about,city:a.city,dateOfBirth:a.dateOfBirth,img:a.img,phone:a.phone}))}export{w as a,R as r};
