import{g as f,r as c}from"./firebace-Cb3kG9CG.js";function $(a){return a!==void 0}async function M(a,d,s){const t=f(a);if(!t)return;const i=new Map(s.map(e=>[e.id,e])),n=d.filter(e=>!e.status&&e.date).sort((e,r)=>v(r.date).getTime()-v(e.date).getTime()).slice(0,4).map(e=>{const r=i.get(e.userId);if(!r)return;const o=r.score.reduce((l,u)=>l+Number(u),0)/r.score.length;return{id:e.id,img:e.img,title:e.title,goal:e.goal,collected:e.collected,userInfo:{id:r.id,name:`${r.name}.`,surname:r.surname,score:Math.round(o)},date:e.date}}).filter($);t.innerHTML="",n.forEach(e=>{h(e,t)})}function v(a){const[d,s,t]=a.split(".").map(Number);return new Date(t,s-1,d)}async function T(a,d,s){const t=f(a),i=[];d.forEach(n=>{s.forEach(e=>{if(n.userId==e.id&&!n.status){const r=e.score.reduce((o,l)=>o+Number(l),0)/e.score.length;i.push({id:n.id,img:n.img,title:n.title,goal:n.goal,collected:n.collected,userInfo:{id:e.id,name:`${e.name||"-"}.`,surname:e.surname,score:Math.round(r)},date:n.date})}})}),t&&(t.innerHTML="",i.forEach(n=>{h(n,t)}))}async function C(a,d,s){const t=f(a),i=[];d.forEach(n=>{s.forEach(e=>{if(n.userId==e.id){const r=e.score.reduce((o,l)=>o+Number(l),0)/e.score.length;console.log(r),i.push({id:n.id,img:n.img,title:n.title,goal:n.goal,collected:n.collected,userInfo:{id:e.id,name:`${e.name||"-"}.`,surname:e.surname,score:Math.round(r)},date:n.date})}})}),t&&(t.innerHTML="",i.forEach(n=>{h(n,t)}))}function h(a,d){const s=c("div",["prod",`prod_${a.id}`]),t=c("a",["prod__card","card",`card_${a.id}`]);t.href=`prod.html?id=${a.id}`;const i=c("div","card__img");i.innerHTML=`
    <img src="${a.img}" alt="${a.title}"/>
  `;const n=c("div","card__info"),e=c("div","card__title");e.innerText=a.title;const r=c("div","card__goal");r.innerHTML=`Мета: <span>${a.goal}</span> грн.`;const o=c("div","card__collected");o.innerHTML=`Зібрано: <span>${a.collected}</span> грн.`;const l=c("div",["card__progress-bar","progress-bar"]),u=c("div","progress-bar__progress");u.style.width=a.collected*100/a.goal+"%",l.appendChild(u);const m=c("div","card__user"),_=c("div","card__user-fio");_.innerHTML=`Волонтер: <span>${a.userInfo.surname} ${a.userInfo.name?a.userInfo.name.charAt(0).toUpperCase()+".":""}</span>`;const p=c("div","card__user-score");p.innerHTML=`
    ${a.userInfo.score} 
    <svg>
        <use href="#star"></use>
    </svg>`,m.appendChild(_),m.appendChild(p),n.append(e),n.append(r),n.append(o),n.append(l),n.append(m);const g=c("a",["prod__btn","btn","btn_orange"]);g.innerText="Підтримати",g.href=`prod.html?id=${a.id}`,t.append(i),t.append(n),s.appendChild(t),s.appendChild(g),d.appendChild(s)}export{h as a,T as b,C as c,M as r};
